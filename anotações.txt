import streamlit as st
from database import User, SessionLocal
import streamlit_authenticator as auth
st.title("Seja bem-vindo!!")


session = SessionLocal()
username = st.text_input("Usuário")
password = st.text_input("Senha", type="password")

user = session.query(User).filter_by(username=username).first()


if st.button("Login"):
    if username == user.username and password == user.hashed_password:
        st.success("Login realizado com sucesso!")
        st.session_state["authentication_status"] = True
        st.session_state["username"] = user.username
        st.write(f"Bem-vindo, {user.username}!")
        if st.sidebar.button("Logout"):
            st.session_state["authentication_status"] = False
            st.session_state["username"] = None
    else:
        st.error("Usuário ou senha inválidos!")